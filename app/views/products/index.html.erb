<h1>–Ü–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω</h1>

<div class="search-bar">
  <%= form_with url: root_path, method: :get, local: true do |form| %>
    <%= form.text_field :query, placeholder: "–ü–æ—à—É–∫ —Ç–æ–≤–∞—Ä—ñ–≤", class: "search-input" %>
    <%= form.submit "üîç", class: "search-button" %>
  <% end %>
</div>

<% if params[:query].present? %>
  <p>–ü–æ –∑–∞–ø–∏—Ç—É ¬´<%= params[:query] %>¬ª –∑–Ω–∞–π—à–ª–æ—Å—è <%= @products.count %> —Ç–æ–≤–∞—Ä—ñ–≤</p>
<% end %>

<div class="filters">
  <h3>–§—ñ–ª—å—Ç—Ä–∏</h3>
  <ul>
    <li><%= link_to "–£—Å—ñ", root_path %></li>
    <li><%= link_to "–ê–±—Ä–∏–∫–æ—Å–∏", root_path(category: "–ê–±—Ä–∏–∫–æ—Å–∏") %></li>
    <li><%= link_to "–°–ª–∏–≤–∏", root_path(category: "–°–ª–∏–≤–∏") %></li>
  </ul>
</div>

<div class="products-grid">
  <% @products.each do |product| %>
    <div class="product-card">
      <%= link_to image_tag(product.image_url, alt: product.name), product_path(product) %>
      <h3><%= link_to product.name, product_path(product) %></h3>
      <p><%= number_to_currency(product.price, unit: "‚Ç¥") %></p>

      <% if session[:cart] && session[:cart][product.id.to_s] %>
        <%= button_to "–£ –∫–æ—à–∏–∫—É (#{session[:cart][product.id.to_s]})", add_to_cart_path(product_id: product.id), method: :post, class: "btn btn-warning" %>
      <% else %>
        <%= button_to "–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞", add_to_cart_path(product_id: product.id), method: :post, class: "btn btn-success" %>
      <% end %>
    </div>
  <% end %>
</div>
