<h1 class="text-center my-4">–Ü–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω</h1>

<div class="container">
  <!-- –ü–æ—à—É–∫–æ–≤–∞ –ø–∞–Ω–µ–ª—å -->
  <div class="row mb-4">
    <div class="col-12">
      <%= form_with url: root_path, method: :get, local: true, class: "d-flex" do |form| %>
        <%= form.text_field :query, placeholder: "–ü–æ—à—É–∫ —Ç–æ–≤–∞—Ä—ñ–≤", class: "form-control me-2" %>
        <%= form.submit "üîç", class: "btn btn-primary" %>
      <% end %>
    </div>
  </div>

  <!-- –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –ø–æ—à—É–∫—É -->
  <% if params[:query].present? %>
    <p class="text-muted">–ü–æ –∑–∞–ø–∏—Ç—É ¬´<%= params[:query] %>¬ª –∑–Ω–∞–π—à–ª–æ—Å—è <%= @products.count %> —Ç–æ–≤–∞—Ä—ñ–≤</p>
  <% end %>

  <div class="row">
    <!-- –ü–∞–Ω–µ–ª—å —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ -->
    <div class="col-md-3 mb-4">
      <h4>–§—ñ–ª—å—Ç—Ä–∏</h4>
      <ul class="list-group">
        <li class="list-group-item"><%= link_to "–£—Å—ñ", root_path, class: "text-decoration-none" %></li>
        <li class="list-group-item"><%= link_to "–ê–±—Ä–∏–∫–æ—Å–∏", root_path(category: "–ê–±—Ä–∏–∫–æ—Å–∏"), class: "text-decoration-none" %></li>
        <li class="list-group-item"><%= link_to "–°–ª–∏–≤–∏", root_path(category: "–°–ª–∏–≤–∏"), class: "text-decoration-none" %></li>
      </ul>
    </div>

    <!-- –°—ñ—Ç–∫–∞ —Ç–æ–≤–∞—Ä—ñ–≤ -->
    <div class="col-md-9">
      <div class="row g-4">
        <% @products.each do |product| %>
          <div class="col-md-4">
            <div class="card h-100">
              <%= link_to image_tag(product.image_url, alt: product.name, class: "card-img-top"), product_path(product) %>
              <div class="card-body">
                <h5 class="card-title"><%= link_to product.name, product_path(product), class: "text-decoration-none" %></h5>
                <p class="card-text"><%= number_to_currency(product.price, unit: "‚Ç¥") %></p>
              </div>
              <div class="card-footer bg-white">
                <% if session[:cart] && session[:cart][product.id.to_s] %>
                  <%= button_to "–£ –∫–æ—à–∏–∫—É (#{session[:cart][product.id.to_s]})", add_to_cart_path(product_id: product.id), method: :post, class: "btn btn-warning w-100" %>
                <% else %>
                  <%= button_to "–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞", add_to_cart_path(product_id: product.id), method: :post, class: "btn btn-success w-100" %>
                <% end %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
